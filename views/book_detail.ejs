<%- include("../views/layout.ejs") %>
<h1><%= book.title %></h1>
<p>Author: <a href="<%= book.author.url %>"><%= book.author.name %></a></p>
<p>Summary: <%= book.summary %></p>
<p>ISBN: <%= book.isbn %></p>
<p>
  Genre: <% book.genre.forEach((val, index) => { %>
  <a href="<%= val.url %>"><%= val.name %></a>
  <% if (index < book.genre.length - 1) { %>
  <br />
  <% } %> <% }) %>
</p>
<div style="margin-left: 20px; margin-top: 20px">
  <h4>Copies</h4>
  <% book_instances.forEach(val => { %>
  <hr />
  <% if (val.status === "Available") { %>
  <p class="text-success"><%= val.status %></p>
  <% } else if (val.status === "Maintenance") { %>
  <p class="text-danger"><%= val.status %></p>
  <% } else { %>
  <p class="text-warning"><%= val.status %></p>
  <% } %>

  <p>Imprint: <%= val.imprint %></p>
  <% if (val.status !== "Available") { %>
  <p>Due back: <%= val.due_back %></p>
  <% } %>
  <p>Id: <a href="<%= val.url %>"><%= val.id %></a></p>
  <% }) %>
</div>
<hr>
<p>
  <a href="<%= `${book.url}/delete` %>">Delete Book</a>
</p>
<p>
  <a href="<%= `${book.url}/update` %>">Update Book</a>
</p>
